{% extends "base.html" %}
{% block title %}
Bokning av översättare
{% endblock %}
{% block head %}
    <meta name="viewport" content="width=device-width; initial-scale=1.0;">
    <link rel="stylesheet" href="{{ url_for('static', filename='style/index.css') }}">
{% endblock %}  

{% block content %}
    <h1>Bokning av översättare</h1>
    
    <form action="{{ url_for('submit') }}" method="post">
        {% if not logged_in %}
        <label for="name">Fullständigt namn:</label>
        <input type="text" id="name" name="name" value="{{ user_name }}" required><br><br>

        <label for="phone">Telefonnummer:</label>
        <input type="tel" id="phone" name="phone" value="{{ user_phone }}" required><br><br>

        <label for="email">E-postadress:</label>
        <input type="email" id="email" name="email" value="{{ user_email }}" required><br><br>
        {% endif %}
    
        <label for="start-time">Start Tid:</label>
        <input type="datetime-local" id="start-time" name="starttime" required><br><br>
    
        <label for="end-time">Tidslängd:</label>
        <select id="end-time" name="endtime" required>
            <!-- JavaScript will populate the options here -->
        </select><br><br>
    
        <label for="language">Språk:</label>
        <select id="language" name="language" required>
            <option value="" disabled selected hidden>Välj språk</option>
            {% for combo in combo_list %}
            <option value="{{ combo }}">{{ combo }}</option>
            {% endfor %}
        </select><br><br>

        <label for="translation-type">Översättningstyp:</label>
        <select id="translation-type" name="translation_type" required>
            <option value="påplats">Påplats</option>
            <option value="telefon"selected>Telefon</option>
            <option value="zoom"  >Zoom</option>
        </select><br><br>
    
        <input type="submit" value="Nästa">
    </form>
    

    <script>
        // JavaScript code to show/hide additional fields based on the translation type selection
        const translationTypeSelect = document.getElementById('translation-type');
        const platformContainer = document.getElementById('platform-container');
        const locationContainer = document.getElementById('location-container');
        const startTimeInput = document.getElementById('start-time');
        const endTimeSelect = document.getElementById('end-time');
    
        // Validation to prevent past times and seconds in start and end time inputs
        const currentTime = new Date().toISOString().split(':').slice(0, 2).join(':');
        startTimeInput.min = currentTime;
        endTimeSelect.min = currentTime;
    
        // Populate the end time dropdown with 30-minute intervals
        for (let i = 1; i < 24 * 2; i++) { // Start from 1 to exclude 0 minutes
            const totalMinutes = i * 30;
            const hours = Math.floor(totalMinutes / 60);
            const minutes = totalMinutes % 60;
            const option = document.createElement("option");

            if (hours > 0) {
                if (minutes === 0) {
                    option.value = hours * 60; // Convert hours to minutes
                    option.textContent = `${hours} hour${hours > 1 ? 's' : ''}`;
                } else {
                    option.value = totalMinutes;
                    option.textContent = `${hours} hour${hours > 1 ? 's' : ''} ${minutes} minute${minutes > 1 ? 's' : ''}`;
                }
            } else {
                option.value = totalMinutes;
                option.textContent = `${minutes} minute${minutes > 1 ? 's' : ''}`;
            }

            endTimeSelect.appendChild(option);
        }

    </script>
    
    
    
    
{% endblock %}
